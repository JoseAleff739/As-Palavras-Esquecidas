<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>As Palavras Esquecidas</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom, #f6f1e7, #eaddc1);
      font-family: 'Georgia', serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      overflow: hidden;
    }

    h1 {
      color: #3e2c1c;
      margin-top: 40px;
      text-shadow: 1px 1px 0px #fff;
      font-size: 2.2em;
    }

    h2, h3 {
      color: #3e2c1c;
      margin: 5px 0;
    }

    .area-jogo {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #fffaf0;
      border: 3px solid #c7b299;
      border-radius: 15px;
      box-shadow: 0px 0px 20px rgba(0,0,0,0.1);
      padding: 20px 30px;
      margin-top: 20px;
      min-width: 320px;
    }

    .container-letras {
      display: flex;
      gap: 10px;
      margin: 20px 0;
      flex-wrap: wrap;
      justify-content: center;
    }

    .letra {
      background: #fffbe6;
      border: 2px solid #c7b299;
      border-radius: 8px;
      padding: 12px 18px;
      font-size: 1.5em;
      cursor: pointer;
      transition: 0.2s;
      user-select: none;
    }

    .letra:hover {
      background: #f0e4d7;
      transform: scale(1.1);
    }

    .letra.usada {
      opacity: 0;
      transform: scale(0.7) rotate(-15deg);
      transition: 0.4s ease;
      pointer-events: none;
    }

    .caixa-resposta {
      min-height: 40px;
      font-size: 1.8em;
      border-bottom: 3px solid #3e2c1c;
      padding: 10px;
      text-align: center;
      margin-top: 10px;
      letter-spacing: 4px;
      transition: 0.3s;
    }

    .mensagem {
      margin-top: 15px;
      font-size: 1.2em;
      color: #3e2c1c;
      text-align: center;
      min-height: 1.5em;
    }

    button {
      background: #3e2c1c;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      margin-top: 15px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #5a3e27;
    }

    #botaoCorrigir {
      background: #a67c52;
      margin-top: 10px;
    }

    #botaoCorrigir:hover {
      background: #8c6239;
    }

    footer {
      position: absolute;
      bottom: 10px;
      font-size: 0.9em;
      color: #6b5841;
    }

    #tela-inicial {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(135deg, #8e7d5a, #c7b299);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
      text-align: center;
      z-index: 9999;
      font-family: 'Georgia', serif;
    }

    #tela-inicial h1 {
      font-size: 3em;
      margin-bottom: 20px;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
    }

    #tela-inicial p {
      font-size: 1.3em;
      line-height: 1.5;
      max-width: 500px;
      margin-bottom: 40px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
    }

    #btn-iniciar {
      background: #3e2c1c;
      padding: 15px 40px;
      font-size: 1.2em;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      transition: background 0.3s ease;
    }

    #btn-iniciar:hover {
      background: #5a3e27;
    }
  </style>
</head>
<body>

  <div id="tela-inicial">
    <h1>üìñ As Palavras Esquecidas</h1>
    <p>Bem-vindo ao jogo de ca√ßa-palavras embaralhado!<br>
    H√° muito tempo, as palavras que viviam dentro dos livros se perderam.
    Sem elas, as hist√≥rias se calaram, as p√°ginas ficaram vazias e a imagina√ß√£o adormeceu.<br>
    Agora, cabe a voc√™ encontr√°-las novamente.
    Recupere as palavras esquecidas‚Ä¶ E fa√ßa com que os livros voltem a contar suas hist√≥rias. ‚ú®</p>
    <button id="btn-iniciar">Come√ßar</button>
  </div>

  <h1>üìñ As Palavras Esquecidas</h1>
  <h2 id="capitulo">Cap√≠tulo 1/10</h2>
  <h3 id="pontuacao">Pontua√ß√£o: 0</h3>

  <div class="area-jogo" id="area-jogo">
    <p>Monte a palavra correta clicando nas letras na ordem certa!</p>
    <div id="caixaResposta" class="caixa-resposta"></div>
    <div id="containerLetras" class="container-letras"></div>
    <div id="mensagem" class="mensagem"></div>

    <button id="botaoCorrigir">Corrigir Letra</button>
    <button id="botaoNovaPalavra">Nova Palavra</button>
  </div>

  <script>
    const telaInicial = document.getElementById('tela-inicial');
    const btnIniciar = document.getElementById('btn-iniciar');
    const areaJogo = document.getElementById('area-jogo');

    areaJogo.style.display = 'none'; 
    btnIniciar.onclick = () => {
      telaInicial.style.display = 'none'; 
      areaJogo.style.display = 'flex';  
      novaPalavra();
    };

    let palavras = [ "livro","p√°gina","capa","texto","leitura","cap√≠tulo","conto","fic√ß√£o","hist√≥ria",
      "enredo","personagem","narrativa","verso","poema","romance","autor","biblioteca",
      "prateleira","papel","cl√°ssico","manuscrito","cita√ß√£o","pref√°cio","par√°grafo",
      "letra","palavras","senten√ßa","di√°logo","rima","soneto","tema","cr√¥nica","drama",
      "f√°bula","ilustra√ß√£o","editora","√≠ndice","t√≠tulo","resumo","poesia","√°lbum","artigo",
      "autoridade","biografia","cole√ß√£o","cronologia","dedicat√≥ria","edi√ß√£o","ep√≠logo",
      "escritor","exemplar","ficha","ficcional","folha","glosa","historiador","ilustrador",
      "impress√£o","inciso","in√≠cio","literatura","marca√ß√£o","melodia","met√°fora",
      "narrador","nota","obras","prosa","publica√ß√£o","quadro","revis√£o","r√≥tulo","se√ß√£o",
      "s√≠ntese","sinopse","subt√≠tulo","sum√°rio","s√≠mbolo","tese","vers√≠culo","volume",
      "vulgar","ensaio","est√≥ria","gram√°tica","liter√°rio","m√©trica","novela","objeto",
      "par√≥dia","pl√°gio","teatro"
    ];

    let palavrasUsadas = [];
    let palavraAtual = "";
    let embaralhada = [];
    let resposta = "";
    let pontuacao = 0;
    let capitulo = 1;
    let palavrasCompletas = 0;
    const totalCapitulos = 10;

    let caixaResposta = document.getElementById("caixaResposta");
    let containerLetras = document.getElementById("containerLetras");
    let mensagem = document.getElementById("mensagem");
    let botaoNovaPalavra = document.getElementById("botaoNovaPalavra");
    let exibirPontuacao = document.getElementById("pontuacao");
    let exibirCapitulo = document.getElementById("capitulo");
    let botaoCorrigir = document.getElementById("botaoCorrigir");

    let letrasSelecionadas = [];
    let correcaoUsada = false;

    function juntarLetras(array) {
      return array.join("");
    }

    function embaralhar(palavra) {
      let letras = palavra.split("");
      for (let i = letras.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [letras[i], letras[j]] = [letras[j], letras[i]];
      }
      return letras;
    }

    function novaPalavra() {
      mensagem.textContent = "";
      resposta = "";
      caixaResposta.textContent = "";
      letrasSelecionadas = [];
      correcaoUsada = false;
      botaoCorrigir.disabled = false;

      if(palavrasUsadas.length === palavras.length){
        mensagem.textContent = "Parab√©ns! Voc√™ restaurou as palavras perdidas ‚ú®";
        containerLetras.innerHTML = "";
        botaoNovaPalavra.style.display = "none";
        return;
      }

      let palavraNova;
      do {
        let indice = Math.floor(Math.random() * palavras.length);
        palavraNova = palavras[indice];
      } while (palavrasUsadas.includes(palavraNova));

      palavraAtual = palavraNova;
      palavrasUsadas.push(palavraAtual);

      embaralhada = embaralhar(palavraAtual);
      if (juntarLetras(embaralhada) === palavraAtual) {
        [embaralhada[0], embaralhada[embaralhada.length - 1]] = [embaralhada[embaralhada.length - 1], embaralhada[0]];
      }

      containerLetras.innerHTML = "";
      for (let i = 0; i < embaralhada.length; i++) {
        let letra = embaralhada[i];
        containerLetras.innerHTML += "<div class='letra'>" + letra + "</div>";
      }

      let botoes = containerLetras.getElementsByClassName("letra");
      for (let i = 0; i < botoes.length; i++) {
        botoes[i].onclick = function () {
          selecionarLetra(botoes[i].textContent, botoes[i]);
        };
      }
    }

    function selecionarLetra(letra, elemento) {
      resposta += letra;
      caixaResposta.textContent = resposta;
      elemento.classList.add("usada");
      elemento.style.pointerEvents = "none";
      letrasSelecionadas.push(elemento);

      if (resposta.length === palavraAtual.length) {
        botaoCorrigir.disabled = true;

        if (resposta === palavraAtual) {
          mensagem.textContent = "‚ú® Correto! Voc√™ restaurou a palavra!";
          pontuacao += 10;
          palavrasCompletas++;
          verificarProximoCapitulo();
        } else {
          mensagem.innerHTML = "‚ùå Ops! Palavra incorreta.<br>A palavra correta era <b>" + palavraAtual + "</b>.";
          pontuacao -= 5;
          if (pontuacao < 0) pontuacao = 0;
        }
        exibirPontuacao.textContent = "Pontua√ß√£o: " + pontuacao;
      }
    }

    botaoCorrigir.onclick = function () {
      if (correcaoUsada || letrasSelecionadas.length === 0 || resposta.length === 0) return;

      resposta = resposta.slice(0, -1);
      caixaResposta.textContent = resposta;

      let ultimoBotao = letrasSelecionadas.pop();
      if (ultimoBotao) {
        ultimoBotao.classList.remove("usada");
        ultimoBotao.style.pointerEvents = "auto";
      }

      correcaoUsada = true;
      botaoCorrigir.disabled = true;
    };

    function verificarProximoCapitulo() {
      if (palavrasCompletas > 0 && palavrasCompletas % 5 === 0) {
        capitulo++;
        if (capitulo > totalCapitulos) {
          mensagem.textContent = "Parab√©ns! Voc√™ restaurou as palavras perdidas ‚ú®";
          containerLetras.innerHTML = "";
          botaoNovaPalavra.style.display = "none";
          exibirCapitulo.textContent = "Fim de Jogo";
          return;
        }
        mensagem.textContent = "üìú Cap√≠tulo " + capitulo + "/" + totalCapitulos + ": novas palavras foram esquecidas...";
        exibirCapitulo.textContent = "Cap√≠tulo " + capitulo + "/" + totalCapitulos;
      }
    }

    botaoNovaPalavra.onclick = novaPalavra;

  </script>
</body>
</html>
